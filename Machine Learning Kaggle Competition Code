{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 1. Classification"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "import sys \n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import statsmodels as sm\n",
    "import sklearn\n",
    "import scipy as sp\n",
    "%matplotlib inline \n",
    "import matplotlib.pyplot as plt"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>courier_id</th>\n",
       "      <th>wave_index</th>\n",
       "      <th>tracking_id</th>\n",
       "      <th>courier_wave_start_lng</th>\n",
       "      <th>courier_wave_start_lat</th>\n",
       "      <th>date</th>\n",
       "      <th>group</th>\n",
       "      <th>level</th>\n",
       "      <th>speed</th>\n",
       "      <th>max_load</th>\n",
       "      <th>...</th>\n",
       "      <th>hour</th>\n",
       "      <th>weather_grade_Bad Weather</th>\n",
       "      <th>weather_grade_Normal Weather</th>\n",
       "      <th>weather_grade_Slightly Bad Weather</th>\n",
       "      <th>weather_grade_Very Bad Weather</th>\n",
       "      <th>source_type_ASSIGN</th>\n",
       "      <th>source_type_DELIVERY</th>\n",
       "      <th>source_type_PICKUP</th>\n",
       "      <th>action_type_DELIVERY</th>\n",
       "      <th>action_type_PICKUP</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 31 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   courier_id  wave_index   tracking_id  courier_wave_start_lng  \\\n",
       "0    10007871           0  2.100070e+18              121.630997   \n",
       "1    10007871           0  2.100070e+18              121.630997   \n",
       "2    10007871           0  2.100070e+18              121.630997   \n",
       "3    10007871           0  2.100070e+18              121.630997   \n",
       "4    10007871           0  2.100070e+18              121.630997   \n",
       "\n",
       "   courier_wave_start_lat      date         group  level     speed  max_load  \\\n",
       "0               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "1               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "2               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "3               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "4               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "\n",
       "   ... hour weather_grade_Bad Weather  weather_grade_Normal Weather  \\\n",
       "0  ...   11                         0                             1   \n",
       "1  ...   11                         0                             1   \n",
       "2  ...   11                         0                             1   \n",
       "3  ...   11                         0                             1   \n",
       "4  ...   11                         0                             1   \n",
       "\n",
       "   weather_grade_Slightly Bad Weather  weather_grade_Very Bad Weather  \\\n",
       "0                                   0                               0   \n",
       "1                                   0                               0   \n",
       "2                                   0                               0   \n",
       "3                                   0                               0   \n",
       "4                                   0                               0   \n",
       "\n",
       "   source_type_ASSIGN  source_type_DELIVERY  source_type_PICKUP  \\\n",
       "0                   1                     0                   0   \n",
       "1                   0                     0                   1   \n",
       "2                   0                     1                   0   \n",
       "3                   0                     0                   1   \n",
       "4                   0                     1                   0   \n",
       "\n",
       "   action_type_DELIVERY  action_type_PICKUP  \n",
       "0                     0                   1  \n",
       "1                     1                   0  \n",
       "2                     0                   1  \n",
       "3                     1                   0  \n",
       "4                     0                   1  \n",
       "\n",
       "[5 rows x 31 columns]"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df = pd.read_csv(\"dataframe_train.csv\")\n",
    "#get dummies\n",
    "df = pd.get_dummies(df, columns=['weather_grade','source_type','action_type'],drop_first=False)\n",
    "df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>courier_id</th>\n",
       "      <th>wave_index</th>\n",
       "      <th>tracking_id</th>\n",
       "      <th>courier_wave_start_lng</th>\n",
       "      <th>courier_wave_start_lat</th>\n",
       "      <th>date</th>\n",
       "      <th>group</th>\n",
       "      <th>level</th>\n",
       "      <th>speed</th>\n",
       "      <th>max_load</th>\n",
       "      <th>...</th>\n",
       "      <th>grid_distance</th>\n",
       "      <th>expected_use_time</th>\n",
       "      <th>urgency</th>\n",
       "      <th>hour</th>\n",
       "      <th>weather_grade_Bad Weather</th>\n",
       "      <th>weather_grade_Slightly Bad Weather</th>\n",
       "      <th>weather_grade_Very Bad Weather</th>\n",
       "      <th>source_type_DELIVERY</th>\n",
       "      <th>source_type_PICKUP</th>\n",
       "      <th>action_type_DELIVERY</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>377.0</td>\n",
       "      <td>804</td>\n",
       "      <td>1246</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>780.0</td>\n",
       "      <td>298</td>\n",
       "      <td>1246</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>550.0</td>\n",
       "      <td>545</td>\n",
       "      <td>2462</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>707.0</td>\n",
       "      <td>341</td>\n",
       "      <td>1205</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100070e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020020e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>770.0</td>\n",
       "      <td>166</td>\n",
       "      <td>1882</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 28 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   courier_id  wave_index   tracking_id  courier_wave_start_lng  \\\n",
       "0    10007871           0  2.100070e+18              121.630997   \n",
       "1    10007871           0  2.100070e+18              121.630997   \n",
       "2    10007871           0  2.100070e+18              121.630997   \n",
       "3    10007871           0  2.100070e+18              121.630997   \n",
       "4    10007871           0  2.100070e+18              121.630997   \n",
       "\n",
       "   courier_wave_start_lat      date         group  level     speed  max_load  \\\n",
       "0               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "1               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "2               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "3               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "4               39.142343  20200201  2.020020e+16      3  4.751832        11   \n",
       "\n",
       "   ... grid_distance expected_use_time  urgency  hour  \\\n",
       "0  ...         377.0               804     1246    11   \n",
       "1  ...         780.0               298     1246    11   \n",
       "2  ...         550.0               545     2462    11   \n",
       "3  ...         707.0               341     1205    11   \n",
       "4  ...         770.0               166     1882    11   \n",
       "\n",
       "   weather_grade_Bad Weather  weather_grade_Slightly Bad Weather  \\\n",
       "0                          0                                   0   \n",
       "1                          0                                   0   \n",
       "2                          0                                   0   \n",
       "3                          0                                   0   \n",
       "4                          0                                   0   \n",
       "\n",
       "   weather_grade_Very Bad Weather  source_type_DELIVERY  source_type_PICKUP  \\\n",
       "0                               0                     0                   0   \n",
       "1                               0                     0                   1   \n",
       "2                               0                     1                   0   \n",
       "3                               0                     0                   1   \n",
       "4                               0                     1                   0   \n",
       "\n",
       "   action_type_DELIVERY  \n",
       "0                     0  \n",
       "1                     1  \n",
       "2                     0  \n",
       "3                     1  \n",
       "4                     0  \n",
       "\n",
       "[5 rows x 28 columns]"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#drop baseline\n",
    "df = df.drop(columns = ['weather_grade_Normal Weather','source_type_ASSIGN','action_type_PICKUP'])\n",
    "df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 228,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 2 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "corr = df.corr()\n",
    "fig = plt.figure()\n",
    "ax = fig.add_subplot(111)\n",
    "cax = ax.matshow(corr,cmap='coolwarm', vmin=-1, vmax=1)\n",
    "fig.colorbar(cax)\n",
    "ticks = np.arange(0,len(df.columns),1)\n",
    "ax.set_xticks(ticks)\n",
    "plt.xticks(rotation=90)\n",
    "ax.set_yticks(ticks)\n",
    "ax.set_xticklabels(df.columns)\n",
    "ax.set_yticklabels(df.columns)\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 125,
   "metadata": {},
   "outputs": [],
   "source": [
    "X = df.drop(columns = ['expected_use_time','action_type_DELIVERY','courier_id', 'wave_index', 'tracking_id', 'group', 'id','aoi_id','shop_id','courier_wave_start_lng', 'courier_wave_start_lat','source_tracking_id','source_lng','source_lat','target_lng','target_lat'])\n",
    "y = np.array(df['action_type_DELIVERY'])\n",
    "# Split dataframe_train into training and testing sets.\n",
    "from sklearn.model_selection import train_test_split as tr_te_split\n",
    "X_train, X_test, y_train, y_test = tr_te_split(X, y,stratify=y,random_state=666,test_size=0.3)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 1) Logistic Regression"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 126,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.7211\n",
      "The out-of-sample ROC-AUC is: 0.7197\n"
     ]
    }
   ],
   "source": [
    "from sklearn.linear_model import LogisticRegression as LR\n",
    "from sklearn.metrics import roc_auc_score\n",
    "# LR without PCA\n",
    "lr = LR(C=1,max_iter=10000).fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,lr.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,lr.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 127,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.pipeline import make_pipeline\n",
    "from sklearn.preprocessing import StandardScaler\n",
    "from sklearn.decomposition import PCA"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 128,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.linear_model import LogisticRegression as LR"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 129,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.8104\n",
      "The out-of-sample ROC-AUC is: 0.8098\n"
     ]
    }
   ],
   "source": [
    "##Without PCA\n",
    "pca_lr = make_pipeline(StandardScaler(), LR(C=1,max_iter=10000))\n",
    "pca_lr.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_lr.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_lr.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 131,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.7304\n",
      "The out-of-sample ROC-AUC is: 0.7290\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=11\n",
    "pca_lr = make_pipeline(StandardScaler(), PCA(n_components=11), LR(C=1,max_iter=10000))\n",
    "pca_lr.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_lr.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_lr.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 132,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.7300\n",
      "The out-of-sample ROC-AUC is: 0.7284\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=10\n",
    "pca_lr = make_pipeline(StandardScaler(), PCA(n_components=10), LR(C=1,max_iter=10000))\n",
    "pca_lr.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_lr.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_lr.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 133,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.7298\n",
      "The out-of-sample ROC-AUC is: 0.7282\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=9\n",
    "pca_lr = make_pipeline(StandardScaler(), PCA(n_components=9), LR(C=1,max_iter=10000))\n",
    "pca_lr.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_lr.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_lr.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 134,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.7298\n",
      "The out-of-sample ROC-AUC is: 0.7282\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=8\n",
    "pca_lr = make_pipeline(StandardScaler(), PCA(n_components=8), LR(C=1,max_iter=10000))\n",
    "pca_lr.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_lr.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_lr.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "As we could see from above, the logistic regression without PCA performs the best. We then apply this model to train the entire training data frame and predict the testing dataframe."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 135,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC of the entire training set is: 0.8103\n"
     ]
    }
   ],
   "source": [
    "pca_lr = make_pipeline(StandardScaler(), LR(C=1,max_iter=10000))\n",
    "pca_lr.fit(X, y)\n",
    "print('The in-sample ROC-AUC of the entire training set is: %0.4f' % roc_auc_score(y,pca_lr.predict_proba(X)[:,1]))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 2) knn"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 136,
   "metadata": {},
   "outputs": [],
   "source": [
    "# We first test the baseline knn model without PCA or Clustering\n",
    "from sklearn.model_selection import GridSearchCV\n",
    "from sklearn.neighbors import KNeighborsClassifier"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 138,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The best n_neighbor is {'n_neighbors': 100}\n",
      "The in-sample ROC-AUC is 0.8055\n"
     ]
    }
   ],
   "source": [
    "grid_knn_clf = GridSearchCV(KNeighborsClassifier(),[{'n_neighbors':[10,50,100,150,200]}],scoring = 'roc_auc',cv=5)\n",
    "grid_knn_clf.fit(X_train,y_train)\n",
    "print(\"The best n_neighbor is\",grid_knn_clf.best_params_)\n",
    "print(\"The in-sample ROC-AUC is %0.4f\" % grid_knn_clf.best_score_)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 139,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.8632\n",
      "The out-of-sample ROC-AUC is: 0.8550\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=12\n",
    "knn_clf = make_pipeline(StandardScaler(), PCA(n_components=12),KNeighborsClassifier(n_neighbors = 100))\n",
    "knn_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,knn_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,knn_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 140,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.8622\n",
      "The out-of-sample ROC-AUC is: 0.8539\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=11\n",
    "knn_clf = make_pipeline(StandardScaler(), PCA(n_components=11),KNeighborsClassifier(n_neighbors = 100))\n",
    "knn_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,knn_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,knn_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 141,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.8640\n",
      "The out-of-sample ROC-AUC is: 0.8561\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=10\n",
    "knn_clf = make_pipeline(StandardScaler(), PCA(n_components=10),KNeighborsClassifier(n_neighbors = 100))\n",
    "knn_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,knn_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,knn_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 142,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.8665\n",
      "The out-of-sample ROC-AUC is: 0.8585\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=9\n",
    "knn_clf = make_pipeline(StandardScaler(), PCA(n_components=9),KNeighborsClassifier(n_neighbors = 100))\n",
    "knn_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,knn_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,knn_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 143,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 0.8673\n",
      "The out-of-sample ROC-AUC is: 0.8595\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=8\n",
    "knn_clf = make_pipeline(StandardScaler(), PCA(n_components=8),KNeighborsClassifier(n_neighbors = 100))\n",
    "knn_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,knn_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,knn_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 147,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC of the entire training set is: 0.8678\n"
     ]
    }
   ],
   "source": [
    "knn_clf = make_pipeline(StandardScaler(), PCA(n_components=8),KNeighborsClassifier(n_neighbors = 100))\n",
    "knn_clf.fit(X,y)\n",
    "print('The in-sample ROC-AUC of the entire training set is: %0.4f' % roc_auc_score(y,knn_clf.predict_proba(X)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.metrics import roc_auc_score"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 3) Decision Tree"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.tree import DecisionTreeClassifier, export_graphviz"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.7630\n"
     ]
    }
   ],
   "source": [
    "tree_clf =  DecisionTreeClassifier() \n",
    "tree_clf.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,tree_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,tree_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.7613\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=12\n",
    "pca_tree = make_pipeline(PCA(n_components=12), DecisionTreeClassifier())\n",
    "pca_tree.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_tree.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_tree.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.7610\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=11\n",
    "pca_tree = make_pipeline(PCA(n_components=11), DecisionTreeClassifier())\n",
    "pca_tree.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_tree.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_tree.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.7604\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=10\n",
    "pca_tree = make_pipeline(PCA(n_components=10), DecisionTreeClassifier())\n",
    "pca_tree.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_tree.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_tree.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.7614\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=9\n",
    "pca_tree = make_pipeline(PCA(n_components=9), DecisionTreeClassifier())\n",
    "pca_tree.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_tree.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_tree.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.7630\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=8\n",
    "pca_tree = make_pipeline(PCA(n_components=8), DecisionTreeClassifier())\n",
    "pca_tree.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_tree.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_tree.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.7274\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=7\n",
    "pca_tree = make_pipeline(PCA(n_components=7), DecisionTreeClassifier())\n",
    "pca_tree.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_tree.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_tree.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.7266\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=6\n",
    "pca_tree = make_pipeline(PCA(n_components=6), DecisionTreeClassifier())\n",
    "pca_tree.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_tree.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_tree.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 44,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC of the entire training set is: 1.0000\n"
     ]
    }
   ],
   "source": [
    "pca_tree = make_pipeline(PCA(n_components=8), DecisionTreeClassifier())\n",
    "pca_tree.fit(X, y)\n",
    "print('The in-sample ROC-AUC of the entire training set is: %0.4f' % roc_auc_score(y,pca_tree.predict_proba(X)[:,1]))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The best Decision Tree model still cannot outperform the best Logistic Regression model, so we should stick to Logistic Regression or try other models."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 4) Random Forest"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.ensemble import RandomForestClassifier"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 144,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.8588\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style  type=\"text/css\" >\n",
       "</style><table id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8\" ><thead>    <tr>        <th class=\"col_heading level0 col0\" >Feature</th>        <th class=\"col_heading level0 col1\" >Importance</th>    </tr></thead><tbody>\n",
       "                <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row0_col0\" class=\"data row0 col0\" >date</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row0_col1\" class=\"data row0 col1\" >0.046322</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row1_col0\" class=\"data row1 col0\" >level</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row1_col1\" class=\"data row1 col1\" >0.014640</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row2_col0\" class=\"data row2 col0\" >speed</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row2_col1\" class=\"data row2 col1\" >0.129679</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row3_col0\" class=\"data row3 col0\" >max_load</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row3_col1\" class=\"data row3 col1\" >0.048448</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row4_col0\" class=\"data row4 col0\" >grid_distance</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row4_col1\" class=\"data row4 col1\" >0.350824</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row5_col0\" class=\"data row5 col0\" >urgency</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row5_col1\" class=\"data row5 col1\" >0.190431</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row6_col0\" class=\"data row6 col0\" >hour</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row6_col1\" class=\"data row6 col1\" >0.050842</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row7_col0\" class=\"data row7 col0\" >weather_grade_Bad Weather</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row7_col1\" class=\"data row7 col1\" >0.000119</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row8_col0\" class=\"data row8 col0\" >weather_grade_Slightly Bad Weather</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row8_col1\" class=\"data row8 col1\" >0.004143</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row9_col0\" class=\"data row9 col0\" >weather_grade_Very Bad Weather</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row9_col1\" class=\"data row9 col1\" >0.003516</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row10_col0\" class=\"data row10 col0\" >source_type_DELIVERY</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row10_col1\" class=\"data row10 col1\" >0.104924</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row11_col0\" class=\"data row11 col0\" >source_type_PICKUP</td>\n",
       "                        <td id=\"T_0a9f5314_9b02_11eb_8fd4_600308a139b8row11_col1\" class=\"data row11 col1\" >0.056113</td>\n",
       "            </tr>\n",
       "    </tbody></table>"
      ],
      "text/plain": [
       "<pandas.io.formats.style.Styler at 0x7ff1180beca0>"
      ]
     },
     "execution_count": 144,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Forest = RandomForestClassifier(n_estimators=100)\n",
    "Forest.fit(X_train, y_train)\n",
    "\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,Forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,Forest.predict_proba(X_test)[:,1]))\n",
    "df_feature_importance = pd.DataFrame({\n",
    "    'Feature': X_train.columns,\n",
    "    'Importance': Forest.feature_importances_\n",
    "})\n",
    "df_feature_importance.style.hide_index()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 191,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.8610\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style  type=\"text/css\" >\n",
       "</style><table id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8\" ><thead>    <tr>        <th class=\"col_heading level0 col0\" >Feature</th>        <th class=\"col_heading level0 col1\" >Importance</th>    </tr></thead><tbody>\n",
       "                <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row0_col0\" class=\"data row0 col0\" >date</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row0_col1\" class=\"data row0 col1\" >0.047075</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row1_col0\" class=\"data row1 col0\" >level</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row1_col1\" class=\"data row1 col1\" >0.014705</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row2_col0\" class=\"data row2 col0\" >speed</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row2_col1\" class=\"data row2 col1\" >0.129503</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row3_col0\" class=\"data row3 col0\" >max_load</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row3_col1\" class=\"data row3 col1\" >0.048846</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row4_col0\" class=\"data row4 col0\" >grid_distance</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row4_col1\" class=\"data row4 col1\" >0.346244</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row5_col0\" class=\"data row5 col0\" >urgency</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row5_col1\" class=\"data row5 col1\" >0.195895</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row6_col0\" class=\"data row6 col0\" >hour</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row6_col1\" class=\"data row6 col1\" >0.050460</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row7_col0\" class=\"data row7 col0\" >weather_grade_Bad Weather</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row7_col1\" class=\"data row7 col1\" >0.000121</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row8_col0\" class=\"data row8 col0\" >weather_grade_Slightly Bad Weather</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row8_col1\" class=\"data row8 col1\" >0.004294</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row9_col0\" class=\"data row9 col0\" >weather_grade_Very Bad Weather</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row9_col1\" class=\"data row9 col1\" >0.003629</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row10_col0\" class=\"data row10 col0\" >source_type_DELIVERY</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row10_col1\" class=\"data row10 col1\" >0.102706</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row11_col0\" class=\"data row11 col0\" >source_type_PICKUP</td>\n",
       "                        <td id=\"T_eff6dd1c_9b41_11eb_8fd4_600308a139b8row11_col1\" class=\"data row11 col1\" >0.056521</td>\n",
       "            </tr>\n",
       "    </tbody></table>"
      ],
      "text/plain": [
       "<pandas.io.formats.style.Styler at 0x7fe82b70cd30>"
      ]
     },
     "execution_count": 191,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Forest = RandomForestClassifier(n_estimators=500)\n",
    "Forest.fit(X_train, y_train)\n",
    "\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,Forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,Forest.predict_proba(X_test)[:,1]))\n",
    "df_feature_importance = pd.DataFrame({\n",
    "    'Feature': X_train.columns,\n",
    "    'Importance': Forest.feature_importances_\n",
    "})\n",
    "df_feature_importance.style.hide_index()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 145,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.8611\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style  type=\"text/css\" >\n",
       "</style><table id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8\" ><thead>    <tr>        <th class=\"col_heading level0 col0\" >Feature</th>        <th class=\"col_heading level0 col1\" >Importance</th>    </tr></thead><tbody>\n",
       "                <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row0_col0\" class=\"data row0 col0\" >date</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row0_col1\" class=\"data row0 col1\" >0.046843</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row1_col0\" class=\"data row1 col0\" >level</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row1_col1\" class=\"data row1 col1\" >0.014578</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row2_col0\" class=\"data row2 col0\" >speed</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row2_col1\" class=\"data row2 col1\" >0.129500</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row3_col0\" class=\"data row3 col0\" >max_load</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row3_col1\" class=\"data row3 col1\" >0.048503</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row4_col0\" class=\"data row4 col0\" >grid_distance</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row4_col1\" class=\"data row4 col1\" >0.347500</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row5_col0\" class=\"data row5 col0\" >urgency</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row5_col1\" class=\"data row5 col1\" >0.196477</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row6_col0\" class=\"data row6 col0\" >hour</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row6_col1\" class=\"data row6 col1\" >0.051008</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row7_col0\" class=\"data row7 col0\" >weather_grade_Bad Weather</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row7_col1\" class=\"data row7 col1\" >0.000119</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row8_col0\" class=\"data row8 col0\" >weather_grade_Slightly Bad Weather</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row8_col1\" class=\"data row8 col1\" >0.004246</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row9_col0\" class=\"data row9 col0\" >weather_grade_Very Bad Weather</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row9_col1\" class=\"data row9 col1\" >0.003582</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row10_col0\" class=\"data row10 col0\" >source_type_DELIVERY</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row10_col1\" class=\"data row10 col1\" >0.100606</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row11_col0\" class=\"data row11 col0\" >source_type_PICKUP</td>\n",
       "                        <td id=\"T_11b63b98_9b04_11eb_8fd4_600308a139b8row11_col1\" class=\"data row11 col1\" >0.057039</td>\n",
       "            </tr>\n",
       "    </tbody></table>"
      ],
      "text/plain": [
       "<pandas.io.formats.style.Styler at 0x7ff0f6051a30>"
      ]
     },
     "execution_count": 145,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Forest = RandomForestClassifier(n_estimators=1000)\n",
    "Forest.fit(X_train, y_train)\n",
    "\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,Forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,Forest.predict_proba(X_test)[:,1]))\n",
    "df_feature_importance = pd.DataFrame({\n",
    "    'Feature': X_train.columns,\n",
    "    'Importance': Forest.feature_importances_\n",
    "})\n",
    "df_feature_importance.style.hide_index()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 192,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.8620\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=11\n",
    "pca_forest = make_pipeline(PCA(n_components=11),RandomForestClassifier(n_estimators=500))\n",
    "pca_forest.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_forest.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 193,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.8614\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=10\n",
    "pca_forest = make_pipeline(PCA(n_components=10),RandomForestClassifier(n_estimators=500))\n",
    "pca_forest.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_forest.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "##PCA with n_components=8\n",
    "pca_forest = make_pipeline(PCA(n_components=8),RandomForestClassifier(n_estimators=1000))\n",
    "pca_forest.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_forest.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "##PCA with n_components=6\n",
    "pca_forest = make_pipeline(PCA(n_components=6),RandomForestClassifier(n_estimators=1000))\n",
    "pca_forest.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_forest.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 194,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.8634\n"
     ]
    }
   ],
   "source": [
    "pca_forest = make_pipeline(PolynomialFeatures(degree=2),RandomForestClassifier(n_estimators=500))\n",
    "pca_forest.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_forest.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 195,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC is: 1.0000\n",
      "The out-of-sample ROC-AUC is: 0.8626\n"
     ]
    }
   ],
   "source": [
    "pca_forest = make_pipeline(PolynomialFeatures(degree=3),RandomForestClassifier(n_estimators=500))\n",
    "pca_forest.fit(X_train, y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,pca_forest.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,pca_forest.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 229,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample ROC-AUC of the entire training set is: 0.9811\n"
     ]
    }
   ],
   "source": [
    "pca_forest = make_pipeline(PolynomialFeatures(degree=2),RandomForestClassifier(n_estimators=500))\n",
    "pca_forest.fit(X, y)\n",
    "print('The in-sample ROC-AUC of the entire training set is: %0.4f' % roc_auc_score(y,Forest.predict_proba(X)[:,1]))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 5) XGBT"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import xgboost as xgb"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 273,
   "metadata": {},
   "outputs": [],
   "source": [
    "X3 = df.drop(columns = ['expected_use_time','action_type_DELIVERY','courier_id', 'wave_index', 'tracking_id', 'group', 'id','aoi_id','shop_id'])\n",
    "y3 = np.array(df['action_type_DELIVERY'])\n",
    "# Split dataframe_train into training and testing sets.\n",
    "from sklearn.model_selection import train_test_split as tr_te_split\n",
    "X3_train, X3_test, y3_train, y3_test = tr_te_split(X3, y3,stratify=y3,random_state=666,test_size=0.3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 274,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:50:38] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9169\n",
      "The out-of-sample ROC-AUC is: 0.9033\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'urgency': 60.593467877835906,\n",
       " 'grid_distance': 223.3630622757475,\n",
       " 'source_type_PICKUP': 937.8401364060677,\n",
       " 'source_type_DELIVERY': 2355.2523817723713,\n",
       " 'source_lat': 7.832943624668484,\n",
       " 'courier_wave_start_lng': 7.582075971831277,\n",
       " 'courier_wave_start_lat': 9.176725048708068,\n",
       " 'date': 4.405998824766511,\n",
       " 'target_lat': 17.737593895442206,\n",
       " 'hour': 8.062561488662547,\n",
       " 'level': 5.6575425320924415,\n",
       " 'max_load': 5.827971530276544,\n",
       " 'speed': 3.673242464255588,\n",
       " 'target_lng': 18.285834146332665,\n",
       " 'source_lng': 7.726666828283276,\n",
       " 'weather_grade_Very Bad Weather': 8.024113242911762,\n",
       " 'source_tracking_id': 3.1924245559130426,\n",
       " 'weather_grade_Slightly Bad Weather': 2.586248580503077}"
      ]
     },
     "execution_count": 274,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train3 = xgb.DMatrix(data=X3_train,label= y3_train)\n",
    "data_test3 = xgb.DMatrix(data=X3_test,label= y3_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False)\n",
    "xgbt.fit(X3_train,y3_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_train,xgbt.predict_proba(X3_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_test,xgbt.predict_proba(X3_test)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 275,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:52:05] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9433\n",
      "The out-of-sample ROC-AUC is: 0.9281\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'urgency': 49.00782503383232,\n",
       " 'grid_distance': 171.0519416709743,\n",
       " 'source_type_PICKUP': 754.0632534604257,\n",
       " 'source_type_DELIVERY': 1841.581996766718,\n",
       " 'source_lat': 8.445101707094848,\n",
       " 'courier_wave_start_lng': 10.072800332955296,\n",
       " 'courier_wave_start_lat': 11.771227221871223,\n",
       " 'date': 4.1556980554127,\n",
       " 'target_lat': 20.937642743643575,\n",
       " 'hour': 7.357942163651148,\n",
       " 'level': 5.7021872115308865,\n",
       " 'max_load': 6.057230395808586,\n",
       " 'speed': 3.5436009519575395,\n",
       " 'target_lng': 22.40892777706727,\n",
       " 'source_lng': 8.399517707477505,\n",
       " 'weather_grade_Very Bad Weather': 7.4737857108571415,\n",
       " 'source_tracking_id': 2.970677079857142,\n",
       " 'weather_grade_Slightly Bad Weather': 2.6031956144939032}"
      ]
     },
     "execution_count": 275,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train3 = xgb.DMatrix(data=X3_train,label= y3_train)\n",
    "data_test3 = xgb.DMatrix(data=X3_test,label= y3_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 80,use_label_encoder=False)\n",
    "xgbt.fit(X3_train,y3_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_train,xgbt.predict_proba(X3_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_test,xgbt.predict_proba(X3_test)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 276,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:53:15] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9552\n",
      "The out-of-sample ROC-AUC is: 0.9392\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'urgency': 42.495178423402876,\n",
       " 'grid_distance': 146.44313732654473,\n",
       " 'source_type_PICKUP': 643.3602642812042,\n",
       " 'source_type_DELIVERY': 1602.4444476526253,\n",
       " 'source_lat': 8.49949435899833,\n",
       " 'courier_wave_start_lng': 10.468501425161557,\n",
       " 'courier_wave_start_lat': 11.649225809916084,\n",
       " 'date': 3.931908252895458,\n",
       " 'target_lat': 20.902471888750853,\n",
       " 'hour': 6.912027606753819,\n",
       " 'level': 5.557552625093909,\n",
       " 'max_load': 5.921400687055316,\n",
       " 'speed': 3.4556372447734907,\n",
       " 'target_lng': 21.818533365531138,\n",
       " 'source_lng': 8.182964219979358,\n",
       " 'weather_grade_Very Bad Weather': 7.1777515568764025,\n",
       " 'source_tracking_id': 3.0545662846020396,\n",
       " 'weather_grade_Slightly Bad Weather': 2.586837703457292}"
      ]
     },
     "execution_count": 276,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train3 = xgb.DMatrix(data=X3_train,label= y3_train)\n",
    "data_test3 = xgb.DMatrix(data=X3_test,label= y3_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 100,use_label_encoder=False)\n",
    "xgbt.fit(X3_train,y3_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_train,xgbt.predict_proba(X3_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_test,xgbt.predict_proba(X3_test)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 284,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:57:59] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9946\n",
      "The out-of-sample ROC-AUC is: 0.9788\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 46.913944899090865,\n",
       " 'source_type_DELIVERY': 1493.7420022032504,\n",
       " 'source_lat': 5.551475838863768,\n",
       " 'urgency': 8.548472682907914,\n",
       " 'courier_wave_start_lng': 7.26686053959509,\n",
       " 'courier_wave_start_lat': 8.55911356477118,\n",
       " 'date': 2.8468351761083457,\n",
       " 'source_type_PICKUP': 933.854771226097,\n",
       " 'target_lat': 15.388770504024267,\n",
       " 'level': 3.531966586076848,\n",
       " 'hour': 3.9811416258104457,\n",
       " 'source_lng': 5.347450677896653,\n",
       " 'weather_grade_Slightly Bad Weather': 1.9666111392867882,\n",
       " 'target_lng': 15.650871836758121,\n",
       " 'speed': 2.7833376282881894,\n",
       " 'max_load': 4.211749958637748,\n",
       " 'weather_grade_Very Bad Weather': 4.591040850337694,\n",
       " 'source_tracking_id': 3.1888897939400005,\n",
       " 'weather_grade_Bad Weather': 6.20519543}"
      ]
     },
     "execution_count": 284,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train3 = xgb.DMatrix(data=X3_train,label= y3_train)\n",
    "data_test3 = xgb.DMatrix(data=X3_test,label= y3_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic',\n",
    "                max_depth = 10, n_estimators = 150,use_label_encoder=False)\n",
    "xgbt.fit(X3_train,y3_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_train,xgbt.predict_proba(X3_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_test,xgbt.predict_proba(X3_test)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 285,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:59:13] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9970\n",
      "The out-of-sample ROC-AUC is: 0.9824\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 39.28850916308538,\n",
       " 'source_type_DELIVERY': 1416.9973916959798,\n",
       " 'source_lat': 4.9936943286032,\n",
       " 'urgency': 7.307682536540924,\n",
       " 'courier_wave_start_lng': 6.496998949081515,\n",
       " 'courier_wave_start_lat': 7.6163487594568196,\n",
       " 'date': 2.5920521127444256,\n",
       " 'source_type_PICKUP': 829.3568013077497,\n",
       " 'target_lat': 13.893511902022142,\n",
       " 'level': 3.2110391398220535,\n",
       " 'hour': 3.547919037508172,\n",
       " 'source_lng': 4.850622136704796,\n",
       " 'weather_grade_Slightly Bad Weather': 1.9229573524947963,\n",
       " 'target_lng': 14.030471651914066,\n",
       " 'speed': 2.568680201879251,\n",
       " 'max_load': 3.866654363404075,\n",
       " 'weather_grade_Very Bad Weather': 4.195394561136603,\n",
       " 'source_tracking_id': 2.6932999155774664,\n",
       " 'weather_grade_Bad Weather': 6.20519543}"
      ]
     },
     "execution_count": 285,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train3 = xgb.DMatrix(data=X3_train,label= y3_train)\n",
    "data_test3 = xgb.DMatrix(data=X3_test,label= y3_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic',\n",
    "                max_depth = 10, n_estimators = 200,use_label_encoder=False)\n",
    "xgbt.fit(X3_train,y3_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_train,xgbt.predict_proba(X3_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_test,xgbt.predict_proba(X3_test)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 292,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:04:13] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9983\n",
      "The out-of-sample ROC-AUC is: 0.9846\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 33.95702791883356,\n",
       " 'source_type_DELIVERY': 1347.5710027200298,\n",
       " 'source_lat': 4.58028236406589,\n",
       " 'urgency': 6.474695431220009,\n",
       " 'courier_wave_start_lng': 5.936922292866901,\n",
       " 'courier_wave_start_lat': 6.896152085452523,\n",
       " 'date': 2.410039484925066,\n",
       " 'source_type_PICKUP': 788.6982875626144,\n",
       " 'target_lat': 12.591816555235406,\n",
       " 'level': 2.9834046361504134,\n",
       " 'hour': 3.213913683261198,\n",
       " 'source_lng': 4.4448735884537,\n",
       " 'weather_grade_Slightly Bad Weather': 1.817302195169115,\n",
       " 'target_lng': 12.749842720027459,\n",
       " 'speed': 2.3977564478386464,\n",
       " 'max_load': 3.614434780474911,\n",
       " 'weather_grade_Very Bad Weather': 3.8766815228582394,\n",
       " 'source_tracking_id': 2.49640308337805,\n",
       " 'weather_grade_Bad Weather': 3.306180896}"
      ]
     },
     "execution_count": 292,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train3 = xgb.DMatrix(data=X3_train,label= y3_train)\n",
    "data_test3 = xgb.DMatrix(data=X3_test,label= y3_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic',\n",
    "                max_depth = 10, n_estimators = 250,use_label_encoder=False)\n",
    "xgbt.fit(X3_train,y3_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_train,xgbt.predict_proba(X3_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_test,xgbt.predict_proba(X3_test)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 293,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:09:14] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9991\n",
      "The out-of-sample ROC-AUC is: 0.9863\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 29.35232902043339,\n",
       " 'source_type_DELIVERY': 1261.1418970872032,\n",
       " 'source_lat': 4.1482242297941445,\n",
       " 'urgency': 5.759129611935794,\n",
       " 'courier_wave_start_lng': 5.396549140789277,\n",
       " 'courier_wave_start_lat': 6.222937313277635,\n",
       " 'date': 2.2217052150104566,\n",
       " 'source_type_PICKUP': 729.0629126411845,\n",
       " 'target_lat': 11.550335418838928,\n",
       " 'level': 2.8091721511455163,\n",
       " 'hour': 2.920309147189803,\n",
       " 'source_lng': 4.088626193795217,\n",
       " 'weather_grade_Slightly Bad Weather': 1.7533051250555145,\n",
       " 'target_lng': 11.783400174367417,\n",
       " 'speed': 2.246793156965733,\n",
       " 'max_load': 3.290346310326195,\n",
       " 'weather_grade_Very Bad Weather': 3.607433078877131,\n",
       " 'source_tracking_id': 2.3179130771020424,\n",
       " 'weather_grade_Bad Weather': 2.324040583}"
      ]
     },
     "execution_count": 293,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train3 = xgb.DMatrix(data=X3_train,label= y3_train)\n",
    "data_test3 = xgb.DMatrix(data=X3_test,label= y3_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic',\n",
    "                max_depth = 10, n_estimators = 300,use_label_encoder=False)\n",
    "xgbt.fit(X3_train,y3_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_train,xgbt.predict_proba(X3_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y3_test,xgbt.predict_proba(X3_test)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[04:36:36] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9193\n",
      "The out-of-sample ROC-AUC is: 0.9081\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'expected_use_time': 73.59675893961004,\n",
       " 'source_type_DELIVERY': 1407.9009290518368,\n",
       " 'urgency': 36.737594917794375,\n",
       " 'grid_distance': 72.99144743094811,\n",
       " 'date': 5.061069154554071,\n",
       " 'speed': 3.534120955010961,\n",
       " 'hour': 5.964867935594396,\n",
       " 'max_load': 4.426336182373787,\n",
       " 'level': 4.598070274786016,\n",
       " 'source_type_PICKUP': 877.4910315715628,\n",
       " 'weather_grade_Very Bad Weather': 7.354673977372361,\n",
       " 'weather_grade_Slightly Bad Weather': 2.923704802888235}"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False)\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 61,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The best n_neighbor is {'gamma': 0.001, 'max_depth': 10, 'n_estimators': 50}\n",
      "The in-sample ROC-AUC is 0.9080\n"
     ]
    }
   ],
   "source": [
    "grid_xgbt = GridSearchCV(xgb.XGBClassifier(objective = 'binary:logistic',\n",
    "                                           use_label_encoder=False, \n",
    "                                           eval_metric='logloss',\n",
    "                                           colsample_bynode=0.8,\n",
    "                                           learning_rate=0.1),\n",
    "                                           [{'max_depth':[10,50],'gamma':[0.001,0.01], 'n_estimators': [50,100]}],\n",
    "                         scoring = 'roc_auc',cv=5)\n",
    "grid_xgbt.fit(X_train,y_train)\n",
    "print(\"The best n_neighbor is\",grid_xgbt.best_params_)\n",
    "print(\"The in-sample ROC-AUC is %0.4f\" % grid_xgbt.best_score_)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 63,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:24:27] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9173\n",
      "The out-of-sample ROC-AUC is: 0.9074\n"
     ]
    }
   ],
   "source": [
    "xgbt_clf = make_pipeline(PCA(n_components=12),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 66,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:26:48] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9221\n",
      "The out-of-sample ROC-AUC is: 0.9076\n"
     ]
    }
   ],
   "source": [
    "xgbt_clf = make_pipeline(PCA(n_components=11),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 64,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:25:22] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9217\n",
      "The out-of-sample ROC-AUC is: 0.9077\n"
     ]
    }
   ],
   "source": [
    "xgbt_clf = make_pipeline(PCA(n_components=10),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 67,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:27:12] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9209\n",
      "The out-of-sample ROC-AUC is: 0.9076\n"
     ]
    }
   ],
   "source": [
    "xgbt_clf = make_pipeline(PCA(n_components=9),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 65,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:26:13] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9204\n",
      "The out-of-sample ROC-AUC is: 0.9075\n"
     ]
    }
   ],
   "source": [
    "xgbt_clf = make_pipeline(PCA(n_components=8),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_clf.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt_clf.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt_clf.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 69,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:29:52] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC of the entire training set is: 0.9170\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'expected_use_time': 98.62399326496883,\n",
       " 'source_type_DELIVERY': 1959.8669906547461,\n",
       " 'urgency': 46.722503137381466,\n",
       " 'grid_distance': 95.68497395863488,\n",
       " 'max_load': 5.259205126096014,\n",
       " 'speed': 3.942289891256865,\n",
       " 'level': 5.168129379606883,\n",
       " 'hour': 7.177738498698777,\n",
       " 'date': 5.975119235398241,\n",
       " 'source_type_PICKUP': 1294.6704680500193,\n",
       " 'weather_grade_Very Bad Weather': 7.981509138901365,\n",
       " 'weather_grade_Slightly Bad Weather': 2.394068056666668,\n",
       " 'weather_grade_Bad Weather': 8.64577579}"
      ]
     },
     "execution_count": 69,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X,label= y)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False)\n",
    "xgbt.fit(X,y)\n",
    "print('The in-sample ROC-AUC of the entire training set is: %0.4f' % roc_auc_score(y,xgbt.predict_proba(X)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 85,
   "metadata": {},
   "outputs": [],
   "source": [
    "X_without_time = df.drop(columns = ['action_type_DELIVERY','expected_use_time','courier_id', 'wave_index', 'tracking_id', 'group', 'id','aoi_id','shop_id','courier_wave_start_lng', 'courier_wave_start_lat','source_tracking_id','source_lng','source_lat','target_lng','target_lat'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 82,
   "metadata": {},
   "outputs": [],
   "source": [
    "X_train_without_time = X_train.drop(columns ='expected_use_time')\n",
    "X_test_without_time = X_test.drop(columns ='expected_use_time')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 83,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[23:57:24] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8899\n",
      "The out-of-sample ROC-AUC is: 0.8737\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 89.57965840629618,\n",
       " 'source_type_DELIVERY': 1696.065783142196,\n",
       " 'source_type_PICKUP': 1027.2254775529761,\n",
       " 'speed': 3.6712392151557602,\n",
       " 'hour': 5.268452584234548,\n",
       " 'max_load': 3.977311069319779,\n",
       " 'date': 3.4811899593737095,\n",
       " 'urgency': 18.066252902780548,\n",
       " 'weather_grade_Very Bad Weather': 5.509472817473009,\n",
       " 'level': 3.9082355030294913,\n",
       " 'weather_grade_Slightly Bad Weather': 2.9445667041565184,\n",
       " 'weather_grade_Bad Weather': 4.80474138}"
      ]
     },
     "execution_count": 83,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train_without_time = xgb.DMatrix(data=X_train_without_time,label= y_train)\n",
    "data_test_without_time = xgb.DMatrix(data=X_test_without_time,label= y_test)\n",
    "xgbt_without_time = xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False)\n",
    "xgbt_without_time.fit(X_train_without_time,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt_without_time.predict_proba(X_train_without_time)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt_without_time.predict_proba(X_test_without_time)[:,1]))\n",
    "xgbt_without_time.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 86,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[00:02:11] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC of the entire training set is: 0.8863\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 117.09802750410483,\n",
       " 'source_type_DELIVERY': 2308.161693972491,\n",
       " 'source_type_PICKUP': 1413.3672468852806,\n",
       " 'level': 4.203737228535511,\n",
       " 'hour': 6.050988273067498,\n",
       " 'max_load': 4.485262709268762,\n",
       " 'urgency': 22.91367266471948,\n",
       " 'date': 4.018760840328286,\n",
       " 'weather_grade_Slightly Bad Weather': 3.274251536338238,\n",
       " 'speed': 3.7282464491171137,\n",
       " 'weather_grade_Very Bad Weather': 6.107819482534398,\n",
       " 'weather_grade_Bad Weather': 3.195790885}"
      ]
     },
     "execution_count": 86,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train_without_time = xgb.DMatrix(data=X_without_time,label= y)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False)\n",
    "xgbt.fit(X_without_time,y)\n",
    "print('The in-sample ROC-AUC of the entire training set is: %0.4f' % roc_auc_score(y,xgbt.predict_proba(X_without_time)[:,1]))\n",
    "xgbt.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 187,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[11:29:17] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8875\n",
      "The out-of-sample ROC-AUC is: 0.8735\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = make_pipeline(PCA(n_components=11),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 188,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[11:30:06] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8910\n",
      "The out-of-sample ROC-AUC is: 0.8733\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = make_pipeline(PCA(n_components=10),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 261,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:35:05] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8917\n",
      "The out-of-sample ROC-AUC is: 0.8733\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = make_pipeline(PCA(n_components=9),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 262,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:35:46] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8909\n",
      "The out-of-sample ROC-AUC is: 0.8733\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = make_pipeline(PCA(n_components=8),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 263,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:36:18] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8896\n",
      "The out-of-sample ROC-AUC is: 0.8733\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = make_pipeline(PCA(n_components=7),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 264,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:36:43] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8453\n",
      "The out-of-sample ROC-AUC is: 0.8215\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = make_pipeline(PCA(n_components=6),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 265,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:37:14] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8366\n",
      "The out-of-sample ROC-AUC is: 0.8144\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = make_pipeline(PCA(n_components=5),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 189,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[11:32:55] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8959\n",
      "The out-of-sample ROC-AUC is: 0.8734\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = make_pipeline(PolynomialFeatures(degree=2),xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 243,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:20:22] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.8899\n",
      "The out-of-sample ROC-AUC is: 0.8737\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False)\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 272,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[22:44:07] WARNING: /Users/travis/build/dmlc/xgboost/src/learner.cc:1061: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective 'binary:logistic' was changed from 'error' to 'logloss'. Explicitly set eval_metric if you'd like to restore the old behavior.\n",
      "The in-sample ROC-AUC is: 0.9150\n",
      "The out-of-sample ROC-AUC is: 0.8684\n"
     ]
    }
   ],
   "source": [
    "data_train = xgb.DMatrix(data=X_train,label= y_train)\n",
    "data_test = xgb.DMatrix(data=X_test,label= y_test)\n",
    "xgbt = xgb.XGBClassifier(objective ='binary:logistic',\n",
    "                max_depth = 10, n_estimators = 80,use_label_encoder=False)\n",
    "xgbt.fit(X_train,y_train)\n",
    "print('The in-sample ROC-AUC is: %0.4f' % roc_auc_score(y_train,xgbt.predict_proba(X_train)[:,1]))\n",
    "print('The out-of-sample ROC-AUC is: %0.4f' % roc_auc_score(y_test,xgbt.predict_proba(X_test)[:,1]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 294,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>courier_id</th>\n",
       "      <th>wave_index</th>\n",
       "      <th>tracking_id</th>\n",
       "      <th>courier_wave_start_lng</th>\n",
       "      <th>courier_wave_start_lat</th>\n",
       "      <th>date</th>\n",
       "      <th>group</th>\n",
       "      <th>level</th>\n",
       "      <th>speed</th>\n",
       "      <th>max_load</th>\n",
       "      <th>...</th>\n",
       "      <th>target_lat</th>\n",
       "      <th>grid_distance</th>\n",
       "      <th>urgency</th>\n",
       "      <th>hour</th>\n",
       "      <th>weather_grade_Bad Weather</th>\n",
       "      <th>weather_grade_Slightly Bad Weather</th>\n",
       "      <th>weather_grade_Very Bad Weather</th>\n",
       "      <th>source_type_2.10E+18</th>\n",
       "      <th>source_type_DELIVERY</th>\n",
       "      <th>source_type_PICKUP</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.144603</td>\n",
       "      <td>796.0</td>\n",
       "      <td>1776</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.150661</td>\n",
       "      <td>1048.0</td>\n",
       "      <td>697</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.144603</td>\n",
       "      <td>1019.0</td>\n",
       "      <td>1756</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.152711</td>\n",
       "      <td>1198.0</td>\n",
       "      <td>676</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.142762</td>\n",
       "      <td>1275.0</td>\n",
       "      <td>2336</td>\n",
       "      <td>14.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 27 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   courier_id  wave_index   tracking_id  courier_wave_start_lng  \\\n",
       "0    10007871           2  2.100000e+18              121.630558   \n",
       "1    10007871           2  2.100000e+18              121.630558   \n",
       "2    10007871           2  2.100000e+18              121.630558   \n",
       "3    10007871           2  2.100000e+18              121.630558   \n",
       "4    10007871           2  2.100000e+18              121.630558   \n",
       "\n",
       "   courier_wave_start_lat      date         group  level     speed  max_load  \\\n",
       "0                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "1                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "2                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "3                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "4                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "\n",
       "   ... target_lat grid_distance urgency  hour  weather_grade_Bad Weather  \\\n",
       "0  ...  39.144603         796.0    1776  13.0                          0   \n",
       "1  ...  39.150661        1048.0     697  13.0                          0   \n",
       "2  ...  39.144603        1019.0    1756  13.0                          0   \n",
       "3  ...  39.152711        1198.0     676  13.0                          0   \n",
       "4  ...  39.142762        1275.0    2336  14.0                          0   \n",
       "\n",
       "   weather_grade_Slightly Bad Weather  weather_grade_Very Bad Weather  \\\n",
       "0                                   0                               0   \n",
       "1                                   0                               0   \n",
       "2                                   0                               0   \n",
       "3                                   0                               0   \n",
       "4                                   0                               0   \n",
       "\n",
       "   source_type_2.10E+18  source_type_DELIVERY  source_type_PICKUP  \n",
       "0                     0                     0                   0  \n",
       "1                     0                     0                   1  \n",
       "2                     0                     1                   0  \n",
       "3                     0                     0                   1  \n",
       "4                     0                     1                   0  \n",
       "\n",
       "[5 rows x 27 columns]"
      ]
     },
     "execution_count": 294,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "test_clf = pd.read_csv('dataframe_test.csv')\n",
    "test_clf = pd.get_dummies(test_clf, columns=['weather_grade','source_type'],drop_first=False)\n",
    "test_clf = test_clf.drop(columns = ['weather_grade_Normal Weather','source_type_ASSIGN'])\n",
    "test_clf.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 295,
   "metadata": {},
   "outputs": [],
   "source": [
    "X_test_clf = test_clf.drop(columns = ['source_type_2.10E+18','courier_id', 'wave_index', 'tracking_id', 'group', 'id','aoi_id','shop_id'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 296,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>courier_wave_start_lng</th>\n",
       "      <th>courier_wave_start_lat</th>\n",
       "      <th>date</th>\n",
       "      <th>level</th>\n",
       "      <th>speed</th>\n",
       "      <th>max_load</th>\n",
       "      <th>source_tracking_id</th>\n",
       "      <th>source_lng</th>\n",
       "      <th>source_lat</th>\n",
       "      <th>target_lng</th>\n",
       "      <th>target_lat</th>\n",
       "      <th>grid_distance</th>\n",
       "      <th>urgency</th>\n",
       "      <th>hour</th>\n",
       "      <th>weather_grade_Bad Weather</th>\n",
       "      <th>weather_grade_Slightly Bad Weather</th>\n",
       "      <th>weather_grade_Very Bad Weather</th>\n",
       "      <th>source_type_DELIVERY</th>\n",
       "      <th>source_type_PICKUP</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.140900</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.140900</td>\n",
       "      <td>121.629930</td>\n",
       "      <td>39.144603</td>\n",
       "      <td>796.0</td>\n",
       "      <td>1776</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.140900</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.629930</td>\n",
       "      <td>39.144603</td>\n",
       "      <td>121.629604</td>\n",
       "      <td>39.150661</td>\n",
       "      <td>1048.0</td>\n",
       "      <td>697</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.140900</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.629604</td>\n",
       "      <td>39.150661</td>\n",
       "      <td>121.629930</td>\n",
       "      <td>39.144603</td>\n",
       "      <td>1019.0</td>\n",
       "      <td>1756</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.140900</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.629930</td>\n",
       "      <td>39.144603</td>\n",
       "      <td>121.630544</td>\n",
       "      <td>39.152711</td>\n",
       "      <td>1198.0</td>\n",
       "      <td>676</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.140900</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630544</td>\n",
       "      <td>39.152711</td>\n",
       "      <td>121.631446</td>\n",
       "      <td>39.142762</td>\n",
       "      <td>1275.0</td>\n",
       "      <td>2336</td>\n",
       "      <td>14.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25463</th>\n",
       "      <td>121.447895</td>\n",
       "      <td>39.210704</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.681500</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.457034</td>\n",
       "      <td>39.217461</td>\n",
       "      <td>121.453294</td>\n",
       "      <td>39.214381</td>\n",
       "      <td>703.0</td>\n",
       "      <td>3872</td>\n",
       "      <td>19.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25464</th>\n",
       "      <td>121.453580</td>\n",
       "      <td>39.205943</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.681500</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.453580</td>\n",
       "      <td>39.205943</td>\n",
       "      <td>121.450119</td>\n",
       "      <td>39.209546</td>\n",
       "      <td>1297.0</td>\n",
       "      <td>2043</td>\n",
       "      <td>19.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25465</th>\n",
       "      <td>121.453580</td>\n",
       "      <td>39.205943</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.681500</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.450119</td>\n",
       "      <td>39.209546</td>\n",
       "      <td>121.450644</td>\n",
       "      <td>39.207601</td>\n",
       "      <td>233.0</td>\n",
       "      <td>1204</td>\n",
       "      <td>19.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25466</th>\n",
       "      <td>121.453580</td>\n",
       "      <td>39.205943</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.681500</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.450644</td>\n",
       "      <td>39.207601</td>\n",
       "      <td>121.452471</td>\n",
       "      <td>39.209303</td>\n",
       "      <td>720.0</td>\n",
       "      <td>2948</td>\n",
       "      <td>19.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25467</th>\n",
       "      <td>121.453580</td>\n",
       "      <td>39.205943</td>\n",
       "      <td>20200228</td>\n",
       "      <td>3</td>\n",
       "      <td>5.681500</td>\n",
       "      <td>11</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.452471</td>\n",
       "      <td>39.209303</td>\n",
       "      <td>121.451934</td>\n",
       "      <td>39.197651</td>\n",
       "      <td>2887.0</td>\n",
       "      <td>971</td>\n",
       "      <td>20.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>25468 rows Ã— 19 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       courier_wave_start_lng  courier_wave_start_lat      date  level  \\\n",
       "0                  121.630558               39.140900  20200228      3   \n",
       "1                  121.630558               39.140900  20200228      3   \n",
       "2                  121.630558               39.140900  20200228      3   \n",
       "3                  121.630558               39.140900  20200228      3   \n",
       "4                  121.630558               39.140900  20200228      3   \n",
       "...                       ...                     ...       ...    ...   \n",
       "25463              121.447895               39.210704  20200228      3   \n",
       "25464              121.453580               39.205943  20200228      3   \n",
       "25465              121.453580               39.205943  20200228      3   \n",
       "25466              121.453580               39.205943  20200228      3   \n",
       "25467              121.453580               39.205943  20200228      3   \n",
       "\n",
       "          speed  max_load  source_tracking_id  source_lng  source_lat  \\\n",
       "0      5.535851        11        2.100000e+18  121.630558   39.140900   \n",
       "1      5.535851        11        2.100000e+18  121.629930   39.144603   \n",
       "2      5.535851        11        2.100000e+18  121.629604   39.150661   \n",
       "3      5.535851        11        2.100000e+18  121.629930   39.144603   \n",
       "4      5.535851        11        2.100000e+18  121.630544   39.152711   \n",
       "...         ...       ...                 ...         ...         ...   \n",
       "25463  5.681500        11        2.100000e+18  121.457034   39.217461   \n",
       "25464  5.681500        11        2.100000e+18  121.453580   39.205943   \n",
       "25465  5.681500        11        2.100000e+18  121.450119   39.209546   \n",
       "25466  5.681500        11        2.100000e+18  121.450644   39.207601   \n",
       "25467  5.681500        11        2.100000e+18  121.452471   39.209303   \n",
       "\n",
       "       target_lng  target_lat  grid_distance  urgency  hour  \\\n",
       "0      121.629930   39.144603          796.0     1776  13.0   \n",
       "1      121.629604   39.150661         1048.0      697  13.0   \n",
       "2      121.629930   39.144603         1019.0     1756  13.0   \n",
       "3      121.630544   39.152711         1198.0      676  13.0   \n",
       "4      121.631446   39.142762         1275.0     2336  14.0   \n",
       "...           ...         ...            ...      ...   ...   \n",
       "25463  121.453294   39.214381          703.0     3872  19.0   \n",
       "25464  121.450119   39.209546         1297.0     2043  19.0   \n",
       "25465  121.450644   39.207601          233.0     1204  19.0   \n",
       "25466  121.452471   39.209303          720.0     2948  19.0   \n",
       "25467  121.451934   39.197651         2887.0      971  20.0   \n",
       "\n",
       "       weather_grade_Bad Weather  weather_grade_Slightly Bad Weather  \\\n",
       "0                              0                                   0   \n",
       "1                              0                                   0   \n",
       "2                              0                                   0   \n",
       "3                              0                                   0   \n",
       "4                              0                                   0   \n",
       "...                          ...                                 ...   \n",
       "25463                          0                                   0   \n",
       "25464                          0                                   0   \n",
       "25465                          0                                   0   \n",
       "25466                          0                                   0   \n",
       "25467                          0                                   0   \n",
       "\n",
       "       weather_grade_Very Bad Weather  source_type_DELIVERY  \\\n",
       "0                                   0                     0   \n",
       "1                                   0                     0   \n",
       "2                                   0                     1   \n",
       "3                                   0                     0   \n",
       "4                                   0                     1   \n",
       "...                               ...                   ...   \n",
       "25463                               0                     1   \n",
       "25464                               0                     0   \n",
       "25465                               0                     0   \n",
       "25466                               0                     1   \n",
       "25467                               0                     0   \n",
       "\n",
       "       source_type_PICKUP  \n",
       "0                       0  \n",
       "1                       1  \n",
       "2                       0  \n",
       "3                       1  \n",
       "4                       0  \n",
       "...                   ...  \n",
       "25463                   0  \n",
       "25464                   0  \n",
       "25465                   1  \n",
       "25466                   0  \n",
       "25467                   1  \n",
       "\n",
       "[25468 rows x 19 columns]"
      ]
     },
     "execution_count": 296,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "X_test_clf"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 297,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>courier_id</th>\n",
       "      <th>wave_index</th>\n",
       "      <th>tracking_id</th>\n",
       "      <th>courier_wave_start_lng</th>\n",
       "      <th>courier_wave_start_lat</th>\n",
       "      <th>date</th>\n",
       "      <th>group</th>\n",
       "      <th>level</th>\n",
       "      <th>speed</th>\n",
       "      <th>max_load</th>\n",
       "      <th>...</th>\n",
       "      <th>grid_distance</th>\n",
       "      <th>urgency</th>\n",
       "      <th>hour</th>\n",
       "      <th>weather_grade_Bad Weather</th>\n",
       "      <th>weather_grade_Slightly Bad Weather</th>\n",
       "      <th>weather_grade_Very Bad Weather</th>\n",
       "      <th>source_type_2.10E+18</th>\n",
       "      <th>source_type_DELIVERY</th>\n",
       "      <th>source_type_PICKUP</th>\n",
       "      <th>action_type</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>796.0</td>\n",
       "      <td>1776</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>1048.0</td>\n",
       "      <td>697</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>1019.0</td>\n",
       "      <td>1756</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>1198.0</td>\n",
       "      <td>676</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>1275.0</td>\n",
       "      <td>2336</td>\n",
       "      <td>14.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 28 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   courier_id  wave_index   tracking_id  courier_wave_start_lng  \\\n",
       "0    10007871           2  2.100000e+18              121.630558   \n",
       "1    10007871           2  2.100000e+18              121.630558   \n",
       "2    10007871           2  2.100000e+18              121.630558   \n",
       "3    10007871           2  2.100000e+18              121.630558   \n",
       "4    10007871           2  2.100000e+18              121.630558   \n",
       "\n",
       "   courier_wave_start_lat      date         group  level     speed  max_load  \\\n",
       "0                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "1                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "2                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "3                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "4                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "\n",
       "   ... grid_distance urgency  hour  weather_grade_Bad Weather  \\\n",
       "0  ...         796.0    1776  13.0                          0   \n",
       "1  ...        1048.0     697  13.0                          0   \n",
       "2  ...        1019.0    1756  13.0                          0   \n",
       "3  ...        1198.0     676  13.0                          0   \n",
       "4  ...        1275.0    2336  14.0                          0   \n",
       "\n",
       "   weather_grade_Slightly Bad Weather  weather_grade_Very Bad Weather  \\\n",
       "0                                   0                               0   \n",
       "1                                   0                               0   \n",
       "2                                   0                               0   \n",
       "3                                   0                               0   \n",
       "4                                   0                               0   \n",
       "\n",
       "   source_type_2.10E+18  source_type_DELIVERY  source_type_PICKUP  action_type  \n",
       "0                     0                     0                   0            0  \n",
       "1                     0                     0                   1            1  \n",
       "2                     0                     1                   0            0  \n",
       "3                     0                     0                   1            1  \n",
       "4                     0                     1                   0            0  \n",
       "\n",
       "[5 rows x 28 columns]"
      ]
     },
     "execution_count": 297,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "y_pred = xgbt.predict(X_test_clf)\n",
    "test_clf['action_type'] = y_pred\n",
    "test_clf.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 298,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>order</th>\n",
       "      <th>action_type_DELIVERY</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   order  action_type_DELIVERY\n",
       "0      0                     0\n",
       "1      1                     1\n",
       "2      2                     0\n",
       "3      3                     1\n",
       "4      4                     0"
      ]
     },
     "execution_count": 298,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Clf = pd.read_csv('Classification.csv')\n",
    "Clf['action_type_DELIVERY'] = y_pred\n",
    "Clf.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 299,
   "metadata": {},
   "outputs": [],
   "source": [
    "Clf.to_csv('Classification.csv')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 2. Regression"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 99,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>courier_id</th>\n",
       "      <th>wave_index</th>\n",
       "      <th>tracking_id</th>\n",
       "      <th>courier_wave_start_lng</th>\n",
       "      <th>courier_wave_start_lat</th>\n",
       "      <th>date</th>\n",
       "      <th>group</th>\n",
       "      <th>level</th>\n",
       "      <th>speed</th>\n",
       "      <th>max_load</th>\n",
       "      <th>...</th>\n",
       "      <th>target_lat</th>\n",
       "      <th>grid_distance</th>\n",
       "      <th>expected_use_time</th>\n",
       "      <th>urgency</th>\n",
       "      <th>hour</th>\n",
       "      <th>weather_grade_Bad Weather</th>\n",
       "      <th>weather_grade_Slightly Bad Weather</th>\n",
       "      <th>weather_grade_Very Bad Weather</th>\n",
       "      <th>source_type_DELIVERY</th>\n",
       "      <th>source_type_PICKUP</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.141946</td>\n",
       "      <td>377.0</td>\n",
       "      <td>804</td>\n",
       "      <td>1246</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.140281</td>\n",
       "      <td>780.0</td>\n",
       "      <td>298</td>\n",
       "      <td>1246</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.141811</td>\n",
       "      <td>550.0</td>\n",
       "      <td>545</td>\n",
       "      <td>2462</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.146201</td>\n",
       "      <td>707.0</td>\n",
       "      <td>341</td>\n",
       "      <td>1205</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>10007871</td>\n",
       "      <td>0</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630997</td>\n",
       "      <td>39.142343</td>\n",
       "      <td>20200201</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>4.751832</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.142231</td>\n",
       "      <td>770.0</td>\n",
       "      <td>166</td>\n",
       "      <td>1882</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 27 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   courier_id  wave_index   tracking_id  courier_wave_start_lng  \\\n",
       "0    10007871           0  2.100000e+18              121.630997   \n",
       "1    10007871           0  2.100000e+18              121.630997   \n",
       "2    10007871           0  2.100000e+18              121.630997   \n",
       "3    10007871           0  2.100000e+18              121.630997   \n",
       "4    10007871           0  2.100000e+18              121.630997   \n",
       "\n",
       "   courier_wave_start_lat      date         group  level     speed  max_load  \\\n",
       "0               39.142343  20200201  2.020000e+16      3  4.751832        11   \n",
       "1               39.142343  20200201  2.020000e+16      3  4.751832        11   \n",
       "2               39.142343  20200201  2.020000e+16      3  4.751832        11   \n",
       "3               39.142343  20200201  2.020000e+16      3  4.751832        11   \n",
       "4               39.142343  20200201  2.020000e+16      3  4.751832        11   \n",
       "\n",
       "   ... target_lat grid_distance  expected_use_time  urgency  hour  \\\n",
       "0  ...  39.141946         377.0                804     1246    11   \n",
       "1  ...  39.140281         780.0                298     1246    11   \n",
       "2  ...  39.141811         550.0                545     2462    11   \n",
       "3  ...  39.146201         707.0                341     1205    11   \n",
       "4  ...  39.142231         770.0                166     1882    11   \n",
       "\n",
       "   weather_grade_Bad Weather  weather_grade_Slightly Bad Weather  \\\n",
       "0                          0                                   0   \n",
       "1                          0                                   0   \n",
       "2                          0                                   0   \n",
       "3                          0                                   0   \n",
       "4                          0                                   0   \n",
       "\n",
       "   weather_grade_Very Bad Weather  source_type_DELIVERY  source_type_PICKUP  \n",
       "0                               0                     0                   0  \n",
       "1                               0                     0                   1  \n",
       "2                               0                     1                   0  \n",
       "3                               0                     0                   1  \n",
       "4                               0                     1                   0  \n",
       "\n",
       "[5 rows x 27 columns]"
      ]
     },
     "execution_count": 99,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df1 = pd.read_csv(\"dataframe_train_reg.csv\")\n",
    "#get dummies\n",
    "df1 = pd.get_dummies(df1, columns=['weather_grade','source_type','action_type'],drop_first=False)\n",
    "#drop baseline\n",
    "df1 = df1.drop(columns = ['weather_grade_Normal Weather','source_type_ASSIGN','action_type_PICKUP','action_type_DELIVERY'])\n",
    "df1.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 300,
   "metadata": {},
   "outputs": [],
   "source": [
    "X1 = df1.drop(columns = ['expected_use_time','courier_id', 'wave_index', 'tracking_id', 'group', 'id','aoi_id','shop_id'])\n",
    "y1 = np.array(df1['expected_use_time'])\n",
    "# Split dataframe_train into training and testing sets.\n",
    "from sklearn.model_selection import train_test_split as tr_te_split\n",
    "X1_train, X1_test, y1_train, y1_test = tr_te_split(X1, y1,random_state=666,test_size=0.3)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 1) Linear Regression"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 101,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.linear_model import LinearRegression as LinReg\n",
    "from sklearn.metrics import r2_score"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 102,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is 0.2631\n",
      "The out-of-sample R-squared is 0.2955\n"
     ]
    }
   ],
   "source": [
    "LinR = make_pipeline(StandardScaler(),LinReg(fit_intercept=True))\n",
    "LinR.fit(X1_train, y1_train)\n",
    "print(\"The in-sample R-squared is %0.4f\"% r2_score(y1_train, LinR.predict(X1_train)))\n",
    "print(\"The out-of-sample R-squared is %0.4f\"% r2_score(y1_test, LinR.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 104,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.0941\n",
      "The out-of-sample R-squared is: 0.1161\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=11\n",
    "pca_LinR = make_pipeline(StandardScaler(), PCA(n_components=11), LinReg(fit_intercept=True))\n",
    "pca_LinR.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_LinR.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_LinR.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 105,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.0936\n",
      "The out-of-sample R-squared is: 0.1158\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=10\n",
    "pca_LinR = make_pipeline(StandardScaler(), PCA(n_components=10), LinReg(fit_intercept=True))\n",
    "pca_LinR.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_LinR.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_LinR.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 106,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.0935\n",
      "The out-of-sample R-squared is: 0.1157\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=9\n",
    "pca_LinR = make_pipeline(StandardScaler(), PCA(n_components=9), LinReg(fit_intercept=True))\n",
    "pca_LinR.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_LinR.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_LinR.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 107,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.0932\n",
      "The out-of-sample R-squared is: 0.1154\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=8\n",
    "pca_LinR = make_pipeline(StandardScaler(), PCA(n_components=8), LinReg(fit_intercept=True))\n",
    "pca_LinR.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_LinR.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_LinR.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 155,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.preprocessing import PolynomialFeatures"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 157,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3545\n",
      "The out-of-sample R-squared is: 0.3536\n"
     ]
    }
   ],
   "source": [
    "pca_LinR = make_pipeline(StandardScaler(), PolynomialFeatures(degree=2), LinReg(fit_intercept=True))\n",
    "pca_LinR.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_LinR.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_LinR.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 158,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3760\n",
      "The out-of-sample R-squared is: 0.3735\n"
     ]
    }
   ],
   "source": [
    "pca_LinR = make_pipeline(StandardScaler(), PolynomialFeatures(degree=3), LinReg(fit_intercept=True))\n",
    "pca_LinR.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_LinR.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_LinR.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 159,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3852\n",
      "The out-of-sample R-squared is: 0.3725\n"
     ]
    }
   ],
   "source": [
    "pca_LinR = make_pipeline(StandardScaler(), PolynomialFeatures(degree=4), LinReg(fit_intercept=True))\n",
    "pca_LinR.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_LinR.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_LinR.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 164,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is 0.3758\n"
     ]
    }
   ],
   "source": [
    "LinR = make_pipeline(StandardScaler(),PolynomialFeatures(degree=3),LinReg(fit_intercept=True))\n",
    "LinR.fit(X1, y1)\n",
    "print(\"The in-sample R-squared is %0.4f\"% r2_score(y1, LinR.predict(X1)))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 2) K-Nearest Neighbors Regressor"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 108,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.neighbors import KNeighborsRegressor"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 116,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The best n_neighbor is {'n_neighbors': 150}\n",
      "The in-sample R-squared is 0.2315\n"
     ]
    }
   ],
   "source": [
    "grid_knn_reg = GridSearchCV(KNeighborsRegressor(),[{'n_neighbors':[10,50,100,150,200]}],scoring = 'r2',cv=5)\n",
    "grid_knn_reg.fit(X1_train,y1_train)\n",
    "print(\"The best n_neighbor is\",grid_knn_reg.best_params_)\n",
    "print(\"The in-sample R-squared is %0.4f\" % grid_knn_reg.best_score_)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 117,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3470\n",
      "The out-of-sample R-squared is: 0.3378\n"
     ]
    }
   ],
   "source": [
    "knn_reg = make_pipeline(StandardScaler(),KNeighborsRegressor(n_neighbors = 150))\n",
    "knn_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,knn_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,knn_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 119,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3445\n",
      "The out-of-sample R-squared is: 0.3356\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=11\n",
    "knn_reg = make_pipeline(StandardScaler(), PCA(n_components=11),KNeighborsRegressor(n_neighbors = 150))\n",
    "knn_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,knn_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,knn_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 120,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3492\n",
      "The out-of-sample R-squared is: 0.3407\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=10\n",
    "knn_reg = make_pipeline(StandardScaler(), PCA(n_components=10),KNeighborsRegressor(n_neighbors = 150))\n",
    "knn_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,knn_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,knn_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 121,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3572\n",
      "The out-of-sample R-squared is: 0.3478\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=9\n",
    "knn_reg = make_pipeline(StandardScaler(), PCA(n_components=9),KNeighborsRegressor(n_neighbors = 150))\n",
    "knn_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,knn_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,knn_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 122,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3595\n",
      "The out-of-sample R-squared is: 0.3502\n"
     ]
    }
   ],
   "source": [
    "## PCA with n_components=8\n",
    "knn_reg = make_pipeline(StandardScaler(), PCA(n_components=8),KNeighborsRegressor(n_neighbors = 150))\n",
    "knn_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,knn_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,knn_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": 226,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.3633\n"
     ]
    }
   ],
   "source": [
    "knn_reg = make_pipeline(StandardScaler(), PCA(n_components=8),KNeighborsRegressor(n_neighbors = 150))\n",
    "knn_reg.fit(X1,y1)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,knn_reg.predict(X1_train)))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 3) Decision Tree Regressor"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 109,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.tree import DecisionTreeRegressor"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 110,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 1.0000\n",
      "The out-of-sample R-squared is: -0.3188\n"
     ]
    }
   ],
   "source": [
    "tree_reg =  DecisionTreeRegressor() \n",
    "tree_reg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,tree_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,tree_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 148,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4018\n",
      "The out-of-sample R-squared is: 0.3669\n"
     ]
    }
   ],
   "source": [
    "tree_reg =  DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10) \n",
    "tree_reg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,tree_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,tree_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 150,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4148\n",
      "The out-of-sample R-squared is: 0.3565\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=12\n",
    "pca_treereg = make_pipeline(PCA(n_components=12), DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10))\n",
    "pca_treereg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_treereg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_treereg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 151,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4151\n",
      "The out-of-sample R-squared is: 0.3603\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=11\n",
    "pca_treereg = make_pipeline(PCA(n_components=11), DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10))\n",
    "pca_treereg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_treereg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_treereg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 152,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4032\n",
      "The out-of-sample R-squared is: 0.3595\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=10\n",
    "pca_treereg = make_pipeline(PCA(n_components=10), DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10))\n",
    "pca_treereg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_treereg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_treereg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 153,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4032\n",
      "The out-of-sample R-squared is: 0.3619\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=9\n",
    "pca_treereg = make_pipeline(PCA(n_components=9), DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10))\n",
    "pca_treereg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_treereg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_treereg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 154,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4030\n",
      "The out-of-sample R-squared is: 0.3652\n"
     ]
    }
   ],
   "source": [
    "##PCA with n_components=8\n",
    "pca_treereg = make_pipeline(PCA(n_components=8), DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10))\n",
    "pca_treereg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,pca_treereg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,pca_treereg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 166,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4135\n",
      "The out-of-sample R-squared is: 0.3509\n"
     ]
    }
   ],
   "source": [
    "tree_reg = make_pipeline(PolynomialFeatures(degree=2),DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10))\n",
    "tree_reg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,tree_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,tree_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 167,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4117\n",
      "The out-of-sample R-squared is: 0.3537\n"
     ]
    }
   ],
   "source": [
    "tree_reg = make_pipeline(PolynomialFeatures(degree=3),DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10))\n",
    "tree_reg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,tree_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,tree_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 168,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4107\n",
      "The out-of-sample R-squared is: 0.3549\n"
     ]
    }
   ],
   "source": [
    "tree_reg = make_pipeline(PolynomialFeatures(degree=4),DecisionTreeRegressor(ccp_alpha = 0.01, max_depth=10))\n",
    "tree_reg.fit(X1_train, y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,tree_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,tree_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 4) Random Forest Regressor"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 111,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.ensemble import RandomForestRegressor"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 112,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.9053\n",
      "The out-of-sample R-squared is: 0.3485\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style  type=\"text/css\" >\n",
       "</style><table id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8\" ><thead>    <tr>        <th class=\"col_heading level0 col0\" >Feature</th>        <th class=\"col_heading level0 col1\" >Importance</th>    </tr></thead><tbody>\n",
       "                <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row0_col0\" class=\"data row0 col0\" >date</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row0_col1\" class=\"data row0 col1\" >0.051714</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row1_col0\" class=\"data row1 col0\" >level</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row1_col1\" class=\"data row1 col1\" >0.018354</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row2_col0\" class=\"data row2 col0\" >speed</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row2_col1\" class=\"data row2 col1\" >0.145587</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row3_col0\" class=\"data row3 col0\" >max_load</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row3_col1\" class=\"data row3 col1\" >0.054247</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row4_col0\" class=\"data row4 col0\" >grid_distance</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row4_col1\" class=\"data row4 col1\" >0.317835</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row5_col0\" class=\"data row5 col0\" >urgency</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row5_col1\" class=\"data row5 col1\" >0.227304</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row6_col0\" class=\"data row6 col0\" >hour</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row6_col1\" class=\"data row6 col1\" >0.061924</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row7_col0\" class=\"data row7 col0\" >weather_grade_Bad Weather</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row7_col1\" class=\"data row7 col1\" >0.000049</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row8_col0\" class=\"data row8 col0\" >weather_grade_Slightly Bad Weather</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row8_col1\" class=\"data row8 col1\" >0.007329</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row9_col0\" class=\"data row9 col0\" >weather_grade_Very Bad Weather</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row9_col1\" class=\"data row9 col1\" >0.007379</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row10_col0\" class=\"data row10 col0\" >source_type_DELIVERY</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row10_col1\" class=\"data row10 col1\" >0.091302</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row11_col0\" class=\"data row11 col0\" >source_type_PICKUP</td>\n",
       "                        <td id=\"T_da40a620_9ae6_11eb_8fd4_600308a139b8row11_col1\" class=\"data row11 col1\" >0.016975</td>\n",
       "            </tr>\n",
       "    </tbody></table>"
      ],
      "text/plain": [
       "<pandas.io.formats.style.Styler at 0x7ff0f6041520>"
      ]
     },
     "execution_count": 112,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Forestreg = RandomForestRegressor(n_estimators=50)\n",
    "Forestreg.fit(X1_train, y1_train)\n",
    "\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,Forestreg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,Forestreg.predict(X1_test)))\n",
    "df_feature_importance = pd.DataFrame({\n",
    "    'Feature': X1_train.columns,\n",
    "    'Importance': Forestreg.feature_importances_\n",
    "})\n",
    "df_feature_importance.style.hide_index()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 113,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.9095\n",
      "The out-of-sample R-squared is: 0.3549\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style  type=\"text/css\" >\n",
       "</style><table id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8\" ><thead>    <tr>        <th class=\"col_heading level0 col0\" >Feature</th>        <th class=\"col_heading level0 col1\" >Importance</th>    </tr></thead><tbody>\n",
       "                <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row0_col0\" class=\"data row0 col0\" >date</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row0_col1\" class=\"data row0 col1\" >0.051825</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row1_col0\" class=\"data row1 col0\" >level</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row1_col1\" class=\"data row1 col1\" >0.018457</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row2_col0\" class=\"data row2 col0\" >speed</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row2_col1\" class=\"data row2 col1\" >0.145260</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row3_col0\" class=\"data row3 col0\" >max_load</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row3_col1\" class=\"data row3 col1\" >0.054214</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row4_col0\" class=\"data row4 col0\" >grid_distance</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row4_col1\" class=\"data row4 col1\" >0.318031</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row5_col0\" class=\"data row5 col0\" >urgency</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row5_col1\" class=\"data row5 col1\" >0.227330</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row6_col0\" class=\"data row6 col0\" >hour</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row6_col1\" class=\"data row6 col1\" >0.061872</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row7_col0\" class=\"data row7 col0\" >weather_grade_Bad Weather</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row7_col1\" class=\"data row7 col1\" >0.000057</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row8_col0\" class=\"data row8 col0\" >weather_grade_Slightly Bad Weather</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row8_col1\" class=\"data row8 col1\" >0.007069</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row9_col0\" class=\"data row9 col0\" >weather_grade_Very Bad Weather</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row9_col1\" class=\"data row9 col1\" >0.007407</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row10_col0\" class=\"data row10 col0\" >source_type_DELIVERY</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row10_col1\" class=\"data row10 col1\" >0.091512</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row11_col0\" class=\"data row11 col0\" >source_type_PICKUP</td>\n",
       "                        <td id=\"T_720a332c_9ae7_11eb_8fd4_600308a139b8row11_col1\" class=\"data row11 col1\" >0.016965</td>\n",
       "            </tr>\n",
       "    </tbody></table>"
      ],
      "text/plain": [
       "<pandas.io.formats.style.Styler at 0x7fef1e08e250>"
      ]
     },
     "execution_count": 113,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Forestreg = RandomForestRegressor(n_estimators=100)\n",
    "Forestreg.fit(X1_train, y1_train)\n",
    "\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,Forestreg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,Forestreg.predict(X1_test)))\n",
    "df_feature_importance = pd.DataFrame({\n",
    "    'Feature': X1_train.columns,\n",
    "    'Importance': Forestreg.feature_importances_\n",
    "})\n",
    "df_feature_importance.style.hide_index()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 114,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.9126\n",
      "The out-of-sample R-squared is: 0.3606\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<style  type=\"text/css\" >\n",
       "</style><table id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8\" ><thead>    <tr>        <th class=\"col_heading level0 col0\" >Feature</th>        <th class=\"col_heading level0 col1\" >Importance</th>    </tr></thead><tbody>\n",
       "                <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row0_col0\" class=\"data row0 col0\" >date</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row0_col1\" class=\"data row0 col1\" >0.051696</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row1_col0\" class=\"data row1 col0\" >level</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row1_col1\" class=\"data row1 col1\" >0.018578</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row2_col0\" class=\"data row2 col0\" >speed</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row2_col1\" class=\"data row2 col1\" >0.145065</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row3_col0\" class=\"data row3 col0\" >max_load</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row3_col1\" class=\"data row3 col1\" >0.054142</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row4_col0\" class=\"data row4 col0\" >grid_distance</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row4_col1\" class=\"data row4 col1\" >0.318142</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row5_col0\" class=\"data row5 col0\" >urgency</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row5_col1\" class=\"data row5 col1\" >0.227250</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row6_col0\" class=\"data row6 col0\" >hour</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row6_col1\" class=\"data row6 col1\" >0.062047</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row7_col0\" class=\"data row7 col0\" >weather_grade_Bad Weather</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row7_col1\" class=\"data row7 col1\" >0.000057</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row8_col0\" class=\"data row8 col0\" >weather_grade_Slightly Bad Weather</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row8_col1\" class=\"data row8 col1\" >0.007083</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row9_col0\" class=\"data row9 col0\" >weather_grade_Very Bad Weather</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row9_col1\" class=\"data row9 col1\" >0.007453</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row10_col0\" class=\"data row10 col0\" >source_type_DELIVERY</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row10_col1\" class=\"data row10 col1\" >0.091507</td>\n",
       "            </tr>\n",
       "            <tr>\n",
       "                                <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row11_col0\" class=\"data row11 col0\" >source_type_PICKUP</td>\n",
       "                        <td id=\"T_92ab5450_9aea_11eb_8fd4_600308a139b8row11_col1\" class=\"data row11 col1\" >0.016982</td>\n",
       "            </tr>\n",
       "    </tbody></table>"
      ],
      "text/plain": [
       "<pandas.io.formats.style.Styler at 0x7fef1e0b8730>"
      ]
     },
     "execution_count": 114,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Forestreg = RandomForestRegressor(n_estimators=500)\n",
    "Forestreg.fit(X1_train, y1_train)\n",
    "\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,Forestreg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,Forestreg.predict(X1_test)))\n",
    "df_feature_importance = pd.DataFrame({\n",
    "    'Feature': X1_train.columns,\n",
    "    'Importance': Forestreg.feature_importances_\n",
    "})\n",
    "df_feature_importance.style.hide_index()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "Forestreg = RandomForestRegressor(n_estimators=1000)\n",
    "Forestreg.fit(X1_train, y1_train)\n",
    "\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,Forestreg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,Forestreg.predict(X1_test)))\n",
    "df_feature_importance = pd.DataFrame({\n",
    "    'Feature': X1_train.columns,\n",
    "    'Importance': Forestreg.feature_importances_\n",
    "})\n",
    "df_feature_importance.style.hide_index()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 5) XGBT"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 123,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4657\n",
      "The out-of-sample R-squared is: 0.3893\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 10082920.271898286,\n",
       " 'source_type_PICKUP': 48046434.22112205,\n",
       " 'source_type_DELIVERY': 60442221.76033414,\n",
       " 'urgency': 3303136.6650009616,\n",
       " 'hour': 806987.1577194658,\n",
       " 'max_load': 865316.038381946,\n",
       " 'level': 569727.6826909778,\n",
       " 'speed': 682730.3333974895,\n",
       " 'date': 719706.9271849971,\n",
       " 'weather_grade_Very Bad Weather': 945751.7967885943,\n",
       " 'weather_grade_Slightly Bad Weather': 885698.3909937334,\n",
       " 'weather_grade_Bad Weather': 298136.03278}"
      ]
     },
     "execution_count": 123,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train1 = xgb.DMatrix(data=X1_train,label= y1_train)\n",
    "data_test1 = xgb.DMatrix(data=X1_test,label= y1_test)\n",
    "xgbt_reg = xgb.XGBRegressor(objective ='reg:squarederror', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False)\n",
    "xgbt_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,xgbt_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,xgbt_reg.predict(X1_test)))\n",
    "xgbt_reg.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 171,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4877\n",
      "The out-of-sample R-squared is: 0.3864\n"
     ]
    }
   ],
   "source": [
    "xgbt_reg = make_pipeline(PCA(n_components = 11), xgb.XGBRegressor(objective ='reg:squarederror', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,xgbt_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,xgbt_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 172,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4745\n",
      "The out-of-sample R-squared is: 0.3876\n"
     ]
    }
   ],
   "source": [
    "xgbt_reg = make_pipeline(PCA(n_components = 10), xgb.XGBRegressor(objective ='reg:squarederror', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,xgbt_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,xgbt_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 174,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4704\n",
      "The out-of-sample R-squared is: 0.3879\n"
     ]
    }
   ],
   "source": [
    "xgbt_reg = make_pipeline(PCA(n_components = 8), xgb.XGBRegressor(objective ='reg:squarederror', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,xgbt_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,xgbt_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 170,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4853\n",
      "The out-of-sample R-squared is: 0.3855\n"
     ]
    }
   ],
   "source": [
    "xgbt_reg = make_pipeline(PolynomialFeatures(degree = 2), xgb.XGBRegressor(objective ='reg:squarederror', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,xgbt_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,xgbt_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 173,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4893\n",
      "The out-of-sample R-squared is: 0.3843\n"
     ]
    }
   ],
   "source": [
    "xgbt_reg = make_pipeline(PolynomialFeatures(degree = 3), xgb.XGBRegressor(objective ='reg:squarederror', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False))\n",
    "xgbt_reg.fit(X1_train,y1_train)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1_train,xgbt_reg.predict(X1_train)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1_test,xgbt_reg.predict(X1_test)))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 175,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.4506\n",
      "The out-of-sample R-squared is: 0.4506\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 13369243.328047263,\n",
       " 'source_type_PICKUP': 73194842.53713952,\n",
       " 'source_type_DELIVERY': 84959786.8639149,\n",
       " 'urgency': 4240350.985913365,\n",
       " 'hour': 885994.7495238832,\n",
       " 'max_load': 947269.9211226532,\n",
       " 'date': 904190.824623298,\n",
       " 'level': 627379.9948606725,\n",
       " 'speed': 725829.8045520696,\n",
       " 'weather_grade_Very Bad Weather': 1183835.919294105,\n",
       " 'weather_grade_Slightly Bad Weather': 1040827.0526891891,\n",
       " 'weather_grade_Bad Weather': 363694.4686576923}"
      ]
     },
     "execution_count": 175,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train1 = xgb.DMatrix(data=X1,label= y1)\n",
    "xgbt_reg = xgb.XGBRegressor(objective ='reg:squarederror', colsample_bynode=0.8, learning_rate = 0.1,gamma = 0.001,\n",
    "                max_depth = 10, n_estimators = 50,use_label_encoder=False)\n",
    "xgbt_reg.fit(X1,y1)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1,xgbt_reg.predict(X1)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1,xgbt_reg.predict(X1)))\n",
    "xgbt_reg.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 310,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The in-sample R-squared is: 0.8241\n",
      "The out-of-sample R-squared is: 0.8241\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "{'grid_distance': 1741040.931464037,\n",
       " 'source_type_PICKUP': 5491499.7758363485,\n",
       " 'source_type_DELIVERY': 7584798.850308618,\n",
       " 'urgency': 932791.8502427733,\n",
       " 'level': 250693.11900689558,\n",
       " 'max_load': 351582.2329224031,\n",
       " 'date': 275747.90653513523,\n",
       " 'courier_wave_start_lng': 182620.4140895782,\n",
       " 'speed': 299491.95190578204,\n",
       " 'hour': 304320.05961766344,\n",
       " 'courier_wave_start_lat': 274417.1579653727,\n",
       " 'weather_grade_Slightly Bad Weather': 339232.7374616492,\n",
       " 'source_lng': 326077.5606955906,\n",
       " 'source_lat': 359073.1473404627,\n",
       " 'target_lat': 553914.3935060825,\n",
       " 'target_lng': 490266.04063423857,\n",
       " 'weather_grade_Very Bad Weather': 387865.2263968776,\n",
       " 'weather_grade_Bad Weather': 203628.31759999998}"
      ]
     },
     "execution_count": 310,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data_train1 = xgb.DMatrix(data=X1,label= y1)\n",
    "xgbt_reg = xgb.XGBRegressor(objective ='reg:squarederror',\n",
    "                max_depth = 10, n_estimators = 500,use_label_encoder=False)\n",
    "xgbt_reg.fit(X1,y1)\n",
    "print('The in-sample R-squared is: %0.4f' % r2_score(y1,xgbt_reg.predict(X1)))\n",
    "print('The out-of-sample R-squared is: %0.4f' % r2_score(y1,xgbt_reg.predict(X1)))\n",
    "xgbt_reg.get_booster().get_score(importance_type='gain')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 311,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>courier_id</th>\n",
       "      <th>wave_index</th>\n",
       "      <th>tracking_id</th>\n",
       "      <th>courier_wave_start_lng</th>\n",
       "      <th>courier_wave_start_lat</th>\n",
       "      <th>date</th>\n",
       "      <th>group</th>\n",
       "      <th>level</th>\n",
       "      <th>speed</th>\n",
       "      <th>max_load</th>\n",
       "      <th>...</th>\n",
       "      <th>target_lat</th>\n",
       "      <th>grid_distance</th>\n",
       "      <th>urgency</th>\n",
       "      <th>hour</th>\n",
       "      <th>weather_grade_Bad Weather</th>\n",
       "      <th>weather_grade_Slightly Bad Weather</th>\n",
       "      <th>weather_grade_Very Bad Weather</th>\n",
       "      <th>source_type_2.10E+18</th>\n",
       "      <th>source_type_DELIVERY</th>\n",
       "      <th>source_type_PICKUP</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.144603</td>\n",
       "      <td>796.0</td>\n",
       "      <td>1776</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.150661</td>\n",
       "      <td>1048.0</td>\n",
       "      <td>697</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.144603</td>\n",
       "      <td>1019.0</td>\n",
       "      <td>1756</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.152711</td>\n",
       "      <td>1198.0</td>\n",
       "      <td>676</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>39.142762</td>\n",
       "      <td>1275.0</td>\n",
       "      <td>2336</td>\n",
       "      <td>14.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 27 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   courier_id  wave_index   tracking_id  courier_wave_start_lng  \\\n",
       "0    10007871           2  2.100000e+18              121.630558   \n",
       "1    10007871           2  2.100000e+18              121.630558   \n",
       "2    10007871           2  2.100000e+18              121.630558   \n",
       "3    10007871           2  2.100000e+18              121.630558   \n",
       "4    10007871           2  2.100000e+18              121.630558   \n",
       "\n",
       "   courier_wave_start_lat      date         group  level     speed  max_load  \\\n",
       "0                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "1                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "2                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "3                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "4                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "\n",
       "   ... target_lat grid_distance urgency  hour  weather_grade_Bad Weather  \\\n",
       "0  ...  39.144603         796.0    1776  13.0                          0   \n",
       "1  ...  39.150661        1048.0     697  13.0                          0   \n",
       "2  ...  39.144603        1019.0    1756  13.0                          0   \n",
       "3  ...  39.152711        1198.0     676  13.0                          0   \n",
       "4  ...  39.142762        1275.0    2336  14.0                          0   \n",
       "\n",
       "   weather_grade_Slightly Bad Weather  weather_grade_Very Bad Weather  \\\n",
       "0                                   0                               0   \n",
       "1                                   0                               0   \n",
       "2                                   0                               0   \n",
       "3                                   0                               0   \n",
       "4                                   0                               0   \n",
       "\n",
       "   source_type_2.10E+18  source_type_DELIVERY  source_type_PICKUP  \n",
       "0                     0                     0                   0  \n",
       "1                     0                     0                   1  \n",
       "2                     0                     1                   0  \n",
       "3                     0                     0                   1  \n",
       "4                     0                     1                   0  \n",
       "\n",
       "[5 rows x 27 columns]"
      ]
     },
     "execution_count": 311,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "test_reg = pd.read_csv('dataframe_test_reg.csv')\n",
    "test_reg = pd.get_dummies(test_reg, columns=['weather_grade','source_type'],drop_first=False)\n",
    "test_reg = test_reg.drop(columns = ['weather_grade_Normal Weather','source_type_ASSIGN'])\n",
    "test_reg.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 312,
   "metadata": {},
   "outputs": [],
   "source": [
    "X_test_reg = test_reg.drop(columns = ['source_type_2.10E+18','courier_id', 'wave_index', 'tracking_id', 'group', 'id','aoi_id','shop_id'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 313,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>courier_id</th>\n",
       "      <th>wave_index</th>\n",
       "      <th>tracking_id</th>\n",
       "      <th>courier_wave_start_lng</th>\n",
       "      <th>courier_wave_start_lat</th>\n",
       "      <th>date</th>\n",
       "      <th>group</th>\n",
       "      <th>level</th>\n",
       "      <th>speed</th>\n",
       "      <th>max_load</th>\n",
       "      <th>...</th>\n",
       "      <th>grid_distance</th>\n",
       "      <th>urgency</th>\n",
       "      <th>hour</th>\n",
       "      <th>weather_grade_Bad Weather</th>\n",
       "      <th>weather_grade_Slightly Bad Weather</th>\n",
       "      <th>weather_grade_Very Bad Weather</th>\n",
       "      <th>source_type_2.10E+18</th>\n",
       "      <th>source_type_DELIVERY</th>\n",
       "      <th>source_type_PICKUP</th>\n",
       "      <th>expected_use_time</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>796.0</td>\n",
       "      <td>1776</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>502.264801</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>1048.0</td>\n",
       "      <td>697</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>259.445801</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>1019.0</td>\n",
       "      <td>1756</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>554.091370</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>1198.0</td>\n",
       "      <td>676</td>\n",
       "      <td>13.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>217.896988</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>10007871</td>\n",
       "      <td>2</td>\n",
       "      <td>2.100000e+18</td>\n",
       "      <td>121.630558</td>\n",
       "      <td>39.1409</td>\n",
       "      <td>20200228</td>\n",
       "      <td>2.020000e+16</td>\n",
       "      <td>3</td>\n",
       "      <td>5.535851</td>\n",
       "      <td>11</td>\n",
       "      <td>...</td>\n",
       "      <td>1275.0</td>\n",
       "      <td>2336</td>\n",
       "      <td>14.0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>632.584595</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows Ã— 28 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   courier_id  wave_index   tracking_id  courier_wave_start_lng  \\\n",
       "0    10007871           2  2.100000e+18              121.630558   \n",
       "1    10007871           2  2.100000e+18              121.630558   \n",
       "2    10007871           2  2.100000e+18              121.630558   \n",
       "3    10007871           2  2.100000e+18              121.630558   \n",
       "4    10007871           2  2.100000e+18              121.630558   \n",
       "\n",
       "   courier_wave_start_lat      date         group  level     speed  max_load  \\\n",
       "0                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "1                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "2                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "3                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "4                 39.1409  20200228  2.020000e+16      3  5.535851        11   \n",
       "\n",
       "   ... grid_distance urgency  hour  weather_grade_Bad Weather  \\\n",
       "0  ...         796.0    1776  13.0                          0   \n",
       "1  ...        1048.0     697  13.0                          0   \n",
       "2  ...        1019.0    1756  13.0                          0   \n",
       "3  ...        1198.0     676  13.0                          0   \n",
       "4  ...        1275.0    2336  14.0                          0   \n",
       "\n",
       "   weather_grade_Slightly Bad Weather  weather_grade_Very Bad Weather  \\\n",
       "0                                   0                               0   \n",
       "1                                   0                               0   \n",
       "2                                   0                               0   \n",
       "3                                   0                               0   \n",
       "4                                   0                               0   \n",
       "\n",
       "   source_type_2.10E+18  source_type_DELIVERY  source_type_PICKUP  \\\n",
       "0                     0                     0                   0   \n",
       "1                     0                     0                   1   \n",
       "2                     0                     1                   0   \n",
       "3                     0                     0                   1   \n",
       "4                     0                     1                   0   \n",
       "\n",
       "   expected_use_time  \n",
       "0         502.264801  \n",
       "1         259.445801  \n",
       "2         554.091370  \n",
       "3         217.896988  \n",
       "4         632.584595  \n",
       "\n",
       "[5 rows x 28 columns]"
      ]
     },
     "execution_count": 313,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "y_pred = xgbt_reg.predict(X_test_reg)\n",
    "test_reg['expected_use_time'] = y_pred\n",
    "test_reg.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 314,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>order</th>\n",
       "      <th>expected_use_time</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0</td>\n",
       "      <td>502.264801</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1</td>\n",
       "      <td>259.445801</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2</td>\n",
       "      <td>554.091370</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>3</td>\n",
       "      <td>217.896988</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>4</td>\n",
       "      <td>632.584595</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   order  expected_use_time\n",
       "0      0         502.264801\n",
       "1      1         259.445801\n",
       "2      2         554.091370\n",
       "3      3         217.896988\n",
       "4      4         632.584595"
      ]
     },
     "execution_count": 314,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Reg = pd.read_csv('Regression.csv')\n",
    "Reg['expected_use_time'] = y_pred\n",
    "Reg.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 315,
   "metadata": {},
   "outputs": [],
   "source": [
    "Reg.to_csv('Regression.csv')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
